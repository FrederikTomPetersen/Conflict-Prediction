setwd(GitHub)
source("2 Packages.R")
source("3 Functions.R")
source("4 PostGres_connect.R")
#Possible workspaces - adjust to your local preferences
DataCave = "C:/Users/Frederik/Documents/SpecialeData/"
Private = "C:/Users/Frederik/Documents/SpecialeScripts/"
GitHub = "C:/Users/Frederik/Documents/GitHub/Ethnic-Conflict-Prediction"
Models = "C:/Users/Frederik/Documents/SpecialeModels/"
Latexfigure ="C:/Users/Frederik/OneDrive - Københavns Universitet/Speciale paper/03_figures"
Latextable= "C:/Users/Frederik/OneDrive - Københavns Universitet/Speciale paper/04_tables"
# This scripts binds the dataanalysis of my thesis. It aims to control
# the workflow of the project. it starts out by loading all the necessary packages
# for the project. Then it defines alle the functions neccesary for the later scripts.
# After this intial defintions it starts getting the data from different sources.
# When the datasets are gathered it will automatically begin to tidy the data in order to make af join possible
# after the data are gathered
setwd(GitHub)
source("2 Packages.R")
source("3 Functions.R")
source("4 PostGres_connect.R")
#   Samling af WDI tabeller
WDI_GDPcapita2011c <-  dbGetQuery(con, "SELECT * from wdi_gdp")
WDI_arable_land <-  dbGetQuery(con, "SELECT * from wdi_arable_land")
WDI_export_FMM <-  dbGetQuery(con, "SELECT * from wdi_export_fmm")
WDI_export_GS <-  dbGetQuery(con, "SELECT * from wdi_export_gs")
WDI_export_ME <-  dbGetQuery(con, "SELECT * from wdi_export_me")
WDI_gdp <-  dbGetQuery(con, "SELECT * from wdi_gdp")
WDI_gov_expenditure <-  dbGetQuery(con, "SELECT * from wdi_gov_expenditure")
WDI_population <-  dbGetQuery(con, "SELECT * from wdi_population")
WDI_enrollment <-  dbGetQuery(con, "SELECT * from wdi_secondary_male_enrollment")
vars <-  c("iso2c","year", "NY.GDP.PCAP.PP.KD","NE.DAB.TOTL.ZS","SE.SEC.NENR.MA","AG.LND.ARBL.ZS","NE.EXP.GNFS.ZS","TX.VAL.FUEL.Zs.UN","BX.GSR.MRCH.CD", "SP.POP.TOTL")
A_WDi_gather <-  WDI_GDPcapita2011c %>%
left_join(WDI_gov_expenditure, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_arable_land, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_population, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_export_FMM, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_export_GS, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_export_ME, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_enrollment, by = c("iso2c" = "iso2c", "year" = "year")) %>%
select(vars)
rm(WDI_gov_expenditure,WDI_arable_land,WDI_population,WDI_export_FMM,WDI_export_GS,WDI_export_ME,WDI_enrollment)
rm(WDI_gov_expenditure,WDI_gdp,WDI_arable_land,WDI_population,WDI_export_FMM,WDI_export_GS,WDI_export_ME,WDI_enrollment)
rm(WDI_GDPcapita2011c)
View(A_WDi_gather)
#   Samling af WDI tabeller
WDI_arable_land <-  dbGetQuery(con, "SELECT * from wdi_arable_land")
WDI_export_FMM <-  dbGetQuery(con, "SELECT * from wdi_export_fmm")
WDI_export_GS <-  dbGetQuery(con, "SELECT * from wdi_export_gs")
WDI_export_ME <-  dbGetQuery(con, "SELECT * from wdi_export_me")
WDI_gdp <-  dbGetQuery(con, "SELECT * from wdi_gdp")
WDI_gov_expenditure <-  dbGetQuery(con, "SELECT * from wdi_gov_expenditure")
WDI_population <-  dbGetQuery(con, "SELECT * from wdi_population")
WDI_enrollment <-  dbGetQuery(con, "SELECT * from wdi_secondary_male_enrollment")
vars <-  c("iso2c","year", "NY.GDP.PCAP.PP.KD","NE.DAB.TOTL.ZS","SE.SEC.NENR.MA","AG.LND.ARBL.ZS","NE.EXP.GNFS.ZS","TX.VAL.FUEL.Zs.UN","BX.GSR.MRCH.CD", "SP.POP.TOTL")
A_WDi_gather <-  WDI_gdp %>%
left_join(WDI_gov_expenditure, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_arable_land, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_population, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_export_FMM, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_export_GS, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_export_ME, by = c("iso2c" = "iso2c", "year" = "year")) %>%
left_join(WDI_enrollment, by = c("iso2c" = "iso2c", "year" = "year")) %>%
select(vars)
rm(WDI_gov_expenditure,WDI_gdp,WDI_arable_land,WDI_population,WDI_export_FMM,WDI_export_GS,WDI_export_ME,WDI_enrollment)
View(A_WDi_gather)
imputed_Data <- mice(A_WDi_gather, m=5, maxit = 5, method = 'rf', seed = 1)
library("mice")
imputed_Data <- mice(A_WDi_gather, m=5, maxit = 5, method = 'rf', seed = 1)
md.pattern(A_WDi_gather)
mice_plot <- aggr(WDi_gather_grouped, col=c('navyblue','yellow'),
numbers=TRUE, sortVars=TRUE,
labels=names(WDi_gather_grouped), cex.axis=.6,
gap=1, ylab=c("Missing data","Pattern"))
??aggr
summary(imputed_Data)
